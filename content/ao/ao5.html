<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="keywords" content="Modeling">
  <title>AO 05: Antenna Modeling Software: Part 2</title>
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <center>
    <h1><img src="../images/qex.gif" align="left" width="150" height="83" border="2" vspace="5" hspace="25"> <img src="../images/w4rnlwwr.gif" align="right" width="99" height="83" border="2" vspace="5" hspace="25"><i>Modeling Software, Part 2</i></h1>
  </center>
  <center>
    <h3>L. B. Cebik, W4RNL</h3>
  </center>
  <center>
    <img src="../images/colorbar.gif" align="middle" width="540" height="4">
  </center>
  <p>In Part 1 of this parade through the options facing the new modeler or the modeler wishing to upgrade his or her capabilities, we examined a number of fundamental choices among the available calculating cores for round-wire modeling activities. Besides noting a few (but certainly not all) of the differences between NEC and MININEC programs, we also looked at some differences between NEC-2 and NEC-4. As we came ever closer to sorting among the available commercial implementations of each core, we found variations in the model file formats used among programs. Finally, we explored the need for a modeler to consider both short- and long-range modeling activities when deciding on the segmentation limitations that attach to some programs.</p>
  <p>As if these were not enough options for one to consider when investing in modeling software, we shall explore in this episode a number of other options and what they may (or may not) mean to the modeler. Throughout, we are by-passing explanations of how modeling programs do what they do, since that information appears in many other articles and books. As well, we are not recommending any one or more individual program, but trying to set forth the considerations that each program purchaser should think about when exploring the available programs at their web sites. Last time, we presented a table of programs and the URLs to use when exploring the possibilities.</p>
  <h4>5. The Availability of Commands</h4>MININEC appeared with an abbreviated set of commands relative to NEC-2. The available implementations of both public domain MININEC and the proprietary version known as Expert MININEC have added to the original command list. In general, however, the number of added commands is small.
  <p>NEC is another matter. New modelers often select entry-level software that internally restricts the number of commands relative to the full list accepted by the core. The general purpose in the restriction is to provide the modeler with a user-friendly interface for setting up a model and for examining the output. Among the most notable examples of this practice are standard EZNEC and NEC-Win Plus, although each program uses a unique interface.</p>
  <center>
    <img src="ao5-t1.gif" width="600" height="780" border="2" vspace="5" hspace="9">
  </center>
  <p>To get a handhold on the range of commands that are usable by the NEC cores, examine <b>Table 1</b>. It presents a complete list of commands for NEC-2 and NEC-4. Note that some commands are specific to each core and that some commands change formats when moving from one core to the other. The NEC manuals for both versions tend to divide the commands into those that specify the geometry structure of the antenna and those that control the model afterwards, either by introducing modifications--such as loads or transmission lines--or by specifying the desired output data.</p>
  <p>Entry level programs tend to restrict the number of geometry commands to just 3: GW, GS, and GE. GW specifies a wire's coordinates, number of segments, and radius (although a program may list the entry as the wire diameter). In most cases, the actual user entry is invisible with respect to the command name. GS is a necessary entry that many entry-level programs automatically insert to convert the user's unit of measure into meters, the unit required by the core for calculation. GE simply marks the end of the geometry portion of the model.</p>
  <p>However, full NEC programs that permit ASCII entry of commands allow the use of all of the commands applicable to the core in use. Such programs are 4NEC2, NEC-Win Pro, and GNEC. Some of these programs permit multiple modes of entry. For example, the listed Nittany Scientific programs have an assist screen for each new command so that the user does not need to worry about the line format. In addition, they have an insert--essentially, the NEC-Win Plus program--to allow wire, source, and load creation in a manner identical to the entry-level program. Finally, the programs have a wire-assist function that aids in transferring model geometries created on spreadsheets into the NEC model format.</p>
  <p>The command set is useful in creating complex geometric structures in a compact form. Some programs--EZNEC especially--has wire-formation functions that replicate many of the commands in the geometry list. For example, one can form length-tapered elements (GC), helices (GH), along with wire-grids and radials systems (GM). The results are a list of individual wires, each equivalent to a GW entry. Consider a set of monopoles spaced 1/2 wavelength apart above a wire-grid simulation of a ground-plane surface. Depending on the number of monopoles and the outer dimensions of the rectangular wire grid, the EZNEC construct might have from hundreds to thousands of individual wire entries. In contrast, using the GW entry for the first wire in each group and the GM command to replicate it the required number of times, we might set up any monopole array and its ground surface in no more than 6 entries. However, mastering the full command set for either NEC-2 or NEC-4 requires a far longer learning curve than becoming able to produce useful results from the core with a more restricted command set.</p>
  <p>The control commands are equally restricted in entry-level programs. Among the structure modifying commands, the EX or source command used in entry-level programs is least versatile. The user may specify a voltage source placed on a segment of the geometry. These programs do create an indirect current source, if the user wishes, a function not directly available in range of selections available under the EX label. Among the excitation variations unavailable to the entry-level program user are those involving plane wave excitation--both linear and elliptical. These commands are useful in modeling activities that analyze the receiving and scattering properties of antennas,</p>
  <p>At the lowest entry level, the user has access only to far-field data in both tabular and graphical forms. The graphics are not a function of the core, but are fairly standard functions that programs provide to ease user understanding of the data. Some programs provide tabular near-field data, and others provide--at a more advanced level--surface-wave data. Missing from the list are other options attached to the RP command, and totally missing are the receiving (PT) and mutual coupling (CP) options for output requests. These options are only available in full NEC-2 and/or NEC-4 programs.</p>
  <p>The GF and WG commands associated with reading and writing Numerical Green's Files are especially useful to those who must repetitively use portions of large model files. Consider a series of wire-grid reflector structures having various dimensions. Then consider having to test each reflector with a variety of driver structures, each of which may require changes of position relative to the reflectors. The modeler can initially create a series of reflectors and create (WG) Green's files for each one. Then, by recalling the appropriate file (GF), the modeler can add the driver and run the entire model in a fraction of the time needed to re-run the entire reflector portion from scratch.</p>
  <p>Whether your modeling--both now and in the future--requires the additional commands available in the full NEC programs is more than an idle consideration. As well, you may not need to make a very long-term decision at the beginning. Software makers do offer discounts for upgrading, but only when the move is from one program to another in a single product line.</p>
  <h4>6. Input/Output Style and Presentation</h4>The input and output systems of coordinates often take some users by surprise. The surprise factor is often a function of the system with which the user is most familiar: the compass rose vs. the Cartesian coordinate system. <b>Fig. 1</b> shows the Cartesian coordinate system as used by both NEC and MININEC. In all cases, the +X-axis corresponds to the 0&deg; heading used in the output reports for radiation patterns. +Y corresponds to 90 degrees. Of course, -Z values are valid only for free space models in all of the cores and only in NEC-4 for models using a ground.
  <center>
    <img src="ao5-1.gif" width="495" height="400" border="2" vspace="5" hspace="9">
  </center>
  <p>Note that the system effectively counts counterclockwise. For most antenna structures, the direction of counting presents no problem. However, when constructing arrays of multiple antennas, such as an AM broadcast tower set, not only are directions from one tower to the next important, but as well, the modeler may be used to employing a compass rose or clockwise orientation for the field geometry. So far as I know, only Expert MININEC offers an option for inputting values using true compass or azimuth headings.</p>
  <center>
    <img src="ao5-2.gif" width="820" height="415" border="2" vspace="5" hspace="9">
  </center>
  <p><b>Fig. 2</b> shows the circles for the output conventions. Inherently, NEC and MININEC use the phi or counterclockwise system for headings in the X-Y plane, along with a Z-axis theta system that counts from the overhead or zenith angle downward. Some software systems offer only this option for the presentation of radiation patterns, but other implementations also offer (and refer to) azimuth and elevation headings. In most cases, conversion of theta angles to elevation angles (angles above the horizon) is simple. However, the phi-to-azimuth (clockwise) conversion is more complex. Hence, some software simply calls the phi patterns azimuth patterns. Other software, like the sample standard 2-D azimuth pattern in <b>Fig. 3</b> from NEC-Win Plus, modifies only the outer ring values without flipping the pattern itself. For symmetrical patterns, this practice makes no difference, but may create confusion for non-symmetrical patterns if the user forgets what conversion process is at work.</p>
  <center>
    <img src="ao5-3.gif" width="619" height="415" border="2" vspace="5" hspace="9">
  </center>
  <center>
    <img src="ao5-4.gif" width="445" height="338" border="2" vspace="5" hspace="9">
  </center>
  <p>In the realm of 2-D patterns, there are many more options for presentation than simply the total pattern. Post run calculations can sort out the left-hand and right-hand circular components of a pattern, as in the EZNEC sample shown in <b>Fig. 4</b> and also available in the Nittany Scientific software Multi-Plot facility. Besides showing a pattern, the software may also make available in various forms supplementary data, as shown in the side-box in <b>Fig. 3</b>. Of special interest is the NEC4WIN presentation in <b>Fig. 5</b>; it adds a supplemental calculation of the headings for each lobe in the pattern.</p>
  <center>
    <img src="ao5-5.gif" width="597" height="401" border="2" vspace="5" hspace="9">
  </center>
  <center>
    <img src="ao5-6.gif" width="480" height="324" border="2" vspace="5" hspace="9">
  </center>
  <p>Most modeling software provides a 3-D pattern for the user, and the presentation will vary slightly with each software package. <b>Fig. 6</b> shows the Nittany Scientific version, which allows a conventionalized but not scaled representation of the antenna in the typical line pattern. The antenna view and pattern change together as one rotates the image. Some packages use a standard separation of lines, representing increments (in degrees) between points in the far-field sample. Other programs allow user control of the increments, although one must always strike a balance between wide line spacing and little pattern definition on the one hand, and small increments for detail that may create an unreadable dark graphic. Antenna Model adds color to the pattern for easier reading, as shown in <b>Fig. 7</b>.</p>
  <center>
    <img src="ao5-7.gif" width="700" height="700" border="2" vspace="5" hspace="9">
  </center>
  <p>Although virtually all antenna modeling software packages offer graphical far-field representations that show the same data, some presentations may be better suited to specific applications than others. Hence, the prospective user should consider the options in the appearance of pattern graphics as well as the number of different patterns types that may be available. Far-field patterns have major and minor axes, and the RP0 command allows the user to specify these data in place of the more conventional vertical and horizontal components of the total field. We have also noted that one can calculate the circular components of a total field. Some programs, such as EZNEC Pro, may also allow the presentation of surface-wave (RP1) fields, while others may plot near-field (NE or NH) data.</p>
  <p>In addition to polar plots, some software implementations provide an array of rectangular plots. At the low end of the scale, EZNEC provides an SWR plot across a specified frequency range, while NEC-Win Plus plots both SWR and the impedance components. NEC2GO provides a graph with multiple data lines for frequency sweeps. Antenna Model supplies separate gain, 180&deg; front-to-back ratio, worst-case front-to-back ratio, resistance, reactance, and SWR curves for its frequency sweeps. At the upper end of the range of available rectangular plots are NEC-Win Pro and GNEC, which provide not only graphs for frequency sweeps, but as well, current and receiving data plots.</p>
  <p>To increase the available graphical representations of data from entry-level programs, there are supplemental programs. For example, EZPlots from AC6LA provides extensive graphing of EZNEC frequency sweep data, which emerges from the core program in tabular form only. More flexible is AC6LA's Multi-NEC, which works with a considerable number of NEC and MININEC programs to provide versatility on both the input and outside sides of the core. It allows batch runs and the use of variables on the input side, and produces a number of polar and rectangular plots for the output data. Both of these programs are Excel applications rather than stand-alone programs.</p>
  <h4>7. Auxiliary Functions</h4>Rigorously, any calculation made by an antenna-modeling program outside of the core is an auxiliary function. Since the SWR corresponding to a reported source impedance requires a user specification of a reference impedance, it is technically an auxiliary calculation. Likewise, calculation of the circular components of a total far field fits the same category. However, these calculations are so intimately connected to the core calculations that we tend to think of them as inherent to the modeling process.
  <center>
    <img src="ao5-8.gif" width="640" height="460" border="2" vspace="5" hspace="9">
  </center>
  <p>A more clearly auxiliary function is the "model-by-equation" facility or the use of variables, represented by the NEC-Win Plus "equations" page shown in <b>Fig. 8</b>. (Part 1 showed a sample--<b>Fig. 3</b>--of the NEC-Win Plus "wires" page revealing the use of variables rather than numbers.) In NEC-Win Plus, the equations are preserved only in the .NWP format file, but saving the model in .NEC format saves only the resulting numbers.</p>
  <center>
    <img src="ao5-9.gif" width="662" height="246" border="2" vspace="5" hspace="9">
  </center>
  <p>Some auxiliary functions are extensions of existing commands that the core already provides. <b>Fig. 9</b> shows the screen from EZNEC in which the user would specify loads using R-X, or series or parallel R-L-C values. Placing a trap in an antenna element normally requires external calculation of a parallel L and C value, where the inductor also has a series resistance (calculated from the known or estimated coil Q). Hence a series-to-parallel conversion is in order. As well, the trap is designed to be resonant at a certain frequency. Hence, the net resistance and reactance at other frequencies varies in accord with how far off resonance the trap may be. Rather than calling for an external recalculation of the load assembly for each new frequency, EZNEC recalculates the load value for that frequency based on the input data provided by the user.</p>
  <center>
    <img src="ao5-10.gif" width="707" height="577" border="2" vspace="5" hspace="9">
  </center>
  <p>NEC2GO provides a different type of integrated auxiliary calculation. <b>Fig. 10</b> shows the matching network selection screen. The user selects the desired line impedance and the network type--where only viable networks are active relative to the source impedance derived from an initial core run. There are other matching network programs available, but the unique part of the NEC2GO system is that it converts the selected network and values into an NT command and adds it to the model, moving the source to a new wire created by the auxiliary function.</p>
  <p>We have noted in passing the facility in some programs to create various wire structures within some programs. Radial systems (whether used for a ground plane or as a "top hat") and wire-grid rectangles are the most common, although in EZNEC, one can also create helices and circles (or, more correctly, straight-wire approximations of circles). For more complex structures, Nittany Scientific offers a package called NEC-Win Synth to synthesize the geometry section of models. The output can be saved in both .NWP and in .NEC formats for use in a wide variety of NEC software. The package includes over 50 preset shapes ranging from simple geometric shapes, like an open or closed cylinder, to generic vehicle shapes, such as a sedan, van, or pick-up truck.</p>
  <p>True auxiliary functions are integrated into the software package that implements a given calculation core. Numerous programs have independent modules to perform various calculations, but often, they are conveniences more than integrated parts of the modeling process. For most of the independent calculation modules, one can find external programs to perform the same calculations. Hence, these functions may have lesser status than integrated auxiliary functions when evaluating one's options in the selection of antenna-modeling software.</p>
  <p>Our samples of auxiliary functions, like every other aspect of this survey of options, incompletely represent what is available in the commercial implementations of NEC and MININEC. The goal is to make you aware of the range of enhancements that may be available to the antenna modeler. In deciding what software is best for both immediate and future needs, you will have to decide which features of which software best mesh with those needs.</p>
  <h4>8. Cost</h4>I would be remiss if I did not take cost into account as one of the option sets facing the antenna modeler. Software is an inherently unstable commodity, with both the available features and the cost changing over time. As operating systems evolve, changes in software are inevitable. The PC software that we have sampled is generally compatible with operating systems up through XP. What the near future may bring, such as 64-bit CPUs, etc., and the effects that future developments may have on antenna modeling software appear in a crystal ball that I do not have. Therefore, these notes are necessarily dated and subject to change.
  <p>In thinking about cost, the prospective user must consider the program capabilities that come with the price and the support available from the program developer. Typically, but not always, free programs come without any commitment to support. Support has at least two dimensions: bug fixes and tutorial material. All of the developers noted in this exploration of options want to know about bugs and are interested in user suggestions. However, suggestions for change and enhancement are always subject to programming feasibility, and a given suggestion might not show up in a software package until many versions down the line--if at all.</p>
  <p>Tutorial materials take many forms. Many packages have attached tutorials to guide the user through at least the initial stages of modeling with the software. Manuals come in two forms: via the "help" facility and/or in a printed manual. In some cases, the program developer may provide or update a manual with documents that require user printing. Articles appear from time to time in various journals, such as QST. My own series on <a href="../amod/modeling.html">Antenna Modeling</a> appears monthly in <i>antenneX</i> and covers topics relevant to the use of both NEC (-2 and -4) and MININEC. Of all the cores, NEC-2 enjoys the most tutorial support. The ARRL antenna modeling correspondence course is a 31-lesson introduction to antenna modeling with exercise models provided. Nittany Scientific offers both basic and intermediate modeling tutorials, also with exercise models provided.</p>
  <center>
    <img src="ao5-t2.gif" width="650" height="589" border="2" vspace="5" hspace="9">
  </center>
  <p>Nevertheless, the bottom line is dollars for digits. <b>Table 2</b> provides the software prices as derived from on-line sources at the time of writing. Remember that NEC-4 requires a prior license from LLNL as well as the implementing software, so include all costs when counting your resources. The numbers are for general guidance and are rounded. Be certain to get exact prices, including shipping and handling, from vendors before making your investment in antenna modeling software.</p>
  <p>Whether you are considering an entry-level program or an advanced version of the latest software, these notes are aimed to expand the range of factors that you should consider as you approach a decision. Not all of the available options would fit the space available for these notes, so expect to do much more detailed analyses in preparing to write a check.</p>
  <p>Also see the <a href="../model/nec.html">Antenna Modeling Programs</a> page for more information.</p>
  <center>
    <img src="../images/colorbar.gif" width="591" height="3">
  </center>
  <p><i>Updated 01-12-2006. &COPY; L. B. Cebik, W4RNL. This item first appeared in</i> QEX<i>, Nov/Dec, 2005, pp. 50-56. Reproduced with permission. Copyright ARRL (2005), all rights reserved. This material originally appeared in</i> QEX: Forum for Communications Experimenters <i>(<a href="https://www.arrl.org/qex" target="_blank">www.arrl.org/qex</a>).</i></p>
  <center>
    <img src="../images/colorbar.gif" width="591" height="3">
  </center>
  <p><a href="ao.html"><img src="../images/return.gif" align="bottom" width="40" height="40"> Return to series index page</a></p>
  <p class="topics-footer">Topics: <a href='../topics.html#modeling'>Modeling</a></p><br>
</body>
</html>
